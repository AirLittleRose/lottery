!function(e,i,t){e.fn.jScrollPane=function(i){function s(i,s){var n,o=this,r,a,l,c,f,u,p,d,h,j,g,v,m,b,w,k,y,C,T,B,D,H,S,P,A,W,x,Y,M,X,R,z,I,L=true,F=true,G=false,q=false,V=i.clone(false,false).empty(),E=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";R=i.css("paddingTop")+" "+i.css("paddingRight")+" "+i.css("paddingBottom")+" "+i.css("paddingLeft");z=(parseInt(i.css("paddingLeft"),10)||0)+(parseInt(i.css("paddingRight"),10)||0);function O(s){var o,g,v,b,w,y,C=false,T=false;n=s;if(r===t){w=i.scrollTop();y=i.scrollLeft();i.css({overflow:"hidden",padding:0});a=i.innerWidth()+z;l=i.innerHeight();i.width(a);r=e('<div class="jspPane" hidefocus="true"/>').css("padding",R).append(i.children());c=e('<div class="jspContainer" hidefocus="true" />').css({width:a+"px",height:l+"px"}).append(r).appendTo(i)}else{i.css("width","");C=n.stickToBottom&&hi();T=n.stickToRight&&ji();b=i.innerWidth()+z!=a||i.outerHeight()!=l;if(b){a=i.innerWidth()+z;l=i.innerHeight();c.css({width:a+"px",height:l+"px"})}if(!b&&I==f&&r.outerHeight()==u){i.width(a);return}I=f;r.css("width","");i.width(a);c.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}r.css("overflow","auto");if(s.contentWidth)f=s.contentWidth;else f=r[0].scrollWidth;u=r[0].scrollHeight;r.css("overflow","");p=f/a;d=u/l;h=d>1;j=p>1;if(!(j||h)){i.removeClass("jspScrollable");r.css({top:0,width:c.width()-z});vi();wi();yi();ii();Ti()}else{i.addClass("jspScrollable");o=n.maintainPosition&&(m||k);if(o){g=pi();v=di()}N();Q();$();if(o){fi(T?f-a:g,false);ci(C?u-l:v,false)}bi();gi();Di();if(n.enableKeyboardNavigation)ki();if(n.clickOnTrack)ei();Ci();if(n.hijackInternalLinks)Bi()}if(n.autoReinitialise&&!X)X=setInterval(function(){O(n)},n.autoReinitialiseDelay);else if(!n.autoReinitialise&&X)clearInterval(X);w&&i.scrollTop(0)&&ci(w,false);y&&i.scrollLeft(0)&&fi(y,false);i.trigger("jsp-initialised",[j||h])}function N(){if(h){c.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />')));y=c.find(">.jspVerticalBar");C=y.find(">.jspTrack");g=C.find(">.jspDrag");if(n.showArrows){H=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",Z(0,-1)).bind("click.jsp",mi);S=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",Z(0,1)).bind("click.jsp",mi);if(n.arrowScrollOnHover){H.bind("mouseover.jsp",Z(0,-1,H));S.bind("mouseover.jsp",Z(0,1,S))}J(C,n.verticalArrowPositions,H,S)}B=l;c.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){B-=e(this).outerHeight()});g.hover(function(){g.addClass("jspHover")},function(){g.removeClass("jspHover")}).bind("mousedown.jsp",function(i){e("html").bind("dragstart.jsp selectstart.jsp",mi);g.addClass("jspActive");var t=i.pageY-g.position().top;e("html").bind("mousemove.jsp",function(e){si(e.pageY-t,false)}).bind("mouseup.jsp mouseleave.jsp",ti);return false});K()}}function K(){C.height(B+"px");m=0;T=n.verticalGutter+C.outerWidth();r.width(a-T-z);try{if(0===y.position().left)r.css("margin-left",T+"px")}catch(e){}}function Q(){if(j){c.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />')));P=c.find(">.jspHorizontalBar");A=P.find(">.jspTrack");b=A.find(">.jspDrag");if(n.showArrows){Y=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",Z(-1,0)).bind("click.jsp",mi);M=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",Z(1,0)).bind("click.jsp",mi);if(n.arrowScrollOnHover){Y.bind("mouseover.jsp",Z(-1,0,Y));M.bind("mouseover.jsp",Z(1,0,M))}J(A,n.horizontalArrowPositions,Y,M)}b.hover(function(){b.addClass("jspHover")},function(){b.removeClass("jspHover")}).bind("mousedown.jsp",function(i){e("html").bind("dragstart.jsp selectstart.jsp",mi);b.addClass("jspActive");var t=i.pageX-b.position().left;e("html").bind("mousemove.jsp",function(e){oi(e.pageX-t,false)}).bind("mouseup.jsp mouseleave.jsp",ti);return false});W=c.innerWidth();U()}}function U(){c.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){W-=e(this).outerWidth()});A.width(W+"px");k=0}function $(){if(j&&h){var i=A.outerHeight(),t=C.outerWidth();B-=i;e(P).find(">.jspCap:visible,>.jspArrow").each(function(){W+=e(this).outerWidth()});W-=t;l-=t;a-=i;A.parent().append(e('<div class="jspCorner" />').css("width",i+"px"));K();U()}if(j)r.width(c.outerWidth()-z+"px");u=r.outerHeight();d=u/l;if(j){x=Math.ceil(1/p*W);if(x>n.horizontalDragMaxWidth)x=n.horizontalDragMaxWidth;else if(x<n.horizontalDragMinWidth)x=n.horizontalDragMinWidth;b.width(x+"px");w=W-x;ri(k)}if(h){D=Math.ceil(1/d*B);if(D>n.verticalDragMaxHeight)D=n.verticalDragMaxHeight;else if(D<n.verticalDragMinHeight)D=n.verticalDragMinHeight;g.height(D+"px");v=B-D;ni(m)}}function J(e,i,t,s){var n="before",o="after",r;if("os"==i)i=/Mac/.test(navigator.platform)?"after":"split";if(i==n)o=i;else if(i==o){n=i;r=t;t=s;s=r}e[n](t)[o](s)}function Z(e,i,t){return function(){_(e,i,this,t);this.blur();return false}}function _(i,t,s,r){s=e(s).addClass("jspActive");var a,l,c=true,f=function(){if(0!==i)o.scrollByX(i*n.arrowButtonSpeed);if(0!==t)o.scrollByY(t*n.arrowButtonSpeed);l=setTimeout(f,c?n.initialDelay:n.arrowRepeatFreq);c=false};f();a=r?"mouseout.jsp":"mouseup.jsp";r=r||e("html");r.bind(a,function(){s.removeClass("jspActive");l&&clearTimeout(l);l=null;r.unbind(a)})}function ei(){ii();if(h)C.bind("mousedown.jsp",function(i){if(i.originalTarget===t||i.originalTarget==i.currentTarget){var s=e(this),r=s.offset(),a=i.pageY-r.top-m,c,f=true,p=function(){var e=s.offset(),t=i.pageY-e.top-D/2,r=l*n.scrollPagePercent,h=v*r/(u-l);if(a<0)if(m-h>t)o.scrollByY(-r);else si(t);else if(a>0)if(m+h<t)o.scrollByY(r);else si(t);else{d();return}c=setTimeout(p,f?n.initialDelay:n.trackClickRepeatFreq);f=false},d=function(){c&&clearTimeout(c);c=null;e(document).unbind("mouseup.jsp",d)};p();e(document).bind("mouseup.jsp",d);return false}});if(j)A.bind("mousedown.jsp",function(i){if(i.originalTarget===t||i.originalTarget==i.currentTarget){var s=e(this),r=s.offset(),l=i.pageX-r.left-k,c,u=true,p=function(){var e=s.offset(),t=i.pageX-e.left-x/2,r=a*n.scrollPagePercent,h=w*r/(f-a);if(l<0)if(k-h>t)o.scrollByX(-r);else oi(t);else if(l>0)if(k+h<t)o.scrollByX(r);else oi(t);else{d();return}c=setTimeout(p,u?n.initialDelay:n.trackClickRepeatFreq);u=false},d=function(){c&&clearTimeout(c);c=null;e(document).unbind("mouseup.jsp",d)};p();e(document).bind("mouseup.jsp",d);return false}})}function ii(){if(A)A.unbind("mousedown.jsp");if(C)C.unbind("mousedown.jsp")}function ti(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(g)g.removeClass("jspActive");if(b)b.removeClass("jspActive")}function si(e,i){if(!h)return;if(e<0)e=0;else if(e>v)e=v;if(i===t)i=n.animateScroll;if(i)o.animate(g,"top",e,ni);else{g.css("top",e);ni(e)}}function ni(e){if(e===t)e=g.position().top;c.scrollTop(0);m=e;var s=0===m,n=m==v,o=e/v,a=-o*(u-l);if(L!=s||G!=n){L=s;G=n;i.trigger("jsp-arrow-change",[L,G,F,q])}ai(s,n);r.css("top",a);i.trigger("jsp-scroll-y",[-a,s,n]).trigger("scroll")}function oi(e,i){if(!j)return;if(e<0)e=0;else if(e>w)e=w;if(i===t)i=n.animateScroll;if(i)o.animate(b,"left",e,ri);else{b.css("left",e);ri(e)}}function ri(e){if(e===t)e=b.position().left;c.scrollTop(0);k=e;var s=0===k,n=k==w,o=e/w,l=-o*(f-a);if(F!=s||q!=n){F=s;q=n;i.trigger("jsp-arrow-change",[L,G,F,q])}li(s,n);r.css("left",l);i.trigger("jsp-scroll-x",[-l,s,n]).trigger("scroll")}function ai(e,i){if(n.showArrows){H[e?"addClass":"removeClass"]("jspDisabled");S[i?"addClass":"removeClass"]("jspDisabled")}}function li(e,i){if(n.showArrows){Y[e?"addClass":"removeClass"]("jspDisabled");M[i?"addClass":"removeClass"]("jspDisabled")}}function ci(e,i){var t=e/(u-l);si(t*v,i)}function fi(e,i){var t=e/(f-a);oi(t*w,i)}function ui(i,t,s){var o,r,f,u=0,p=0,d,h,j,g,v,m;try{o=e(i)}catch(b){return}r=o.outerHeight();f=o.outerWidth();c.scrollTop(0);c.scrollLeft(0);while(!o.is(".jspPane")){u+=o.position().top;p+=o.position().left;o=o.offsetParent();if(/^body|html$/i.test(o[0].nodeName))return}d=di();j=d+l;if(u<d||t)v=u-n.verticalGutter;else if(u+r>j)v=u-l+r+n.verticalGutter;if(v)ci(v,s);h=pi();g=h+a;if(p<h||t)m=p-n.horizontalGutter;else if(p+f>g)m=p-a+f+n.horizontalGutter;if(m)fi(m,s)}function pi(){return-r.position().left}function di(){return-r.position().top}function hi(){var e=u-l;return e>20&&e-di()<10}function ji(){var e=f-a;return e>20&&e-pi()<10}function gi(){c.unbind(E).bind(E,function(e,i,t,s){var r=k,a=m;o.scrollBy(t*n.mouseWheelSpeed,-s*n.mouseWheelSpeed,false);return r==k&&a==m})}function vi(){c.unbind(E)}function mi(){return false}function bi(){r.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){ui(e.target,false)})}function wi(){r.find(":input,a").unbind("focus.jsp")}function ki(){var t,s,a=[];j&&a.push(P[0]);h&&a.push(y[0]);r.focus(function(){i.focus()});i.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(i){if(i.target!==this&&!(a.length&&e(i.target).closest(a).length))return;var n=k,o=m;switch(i.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=i.keyCode;f();break;case 35:ci(u-l);t=null;break;case 36:ci(0);t=null}s=i.keyCode==t&&n!=k||o!=m;return!s}).bind("keypress.jsp",function(e){if(e.keyCode==t)f();return!s});if(n.hideFocus){i.css("outline","none");if("hideFocus"in c[0])i.attr("hideFocus",true)}else{i.css("outline","");if("hideFocus"in c[0])i.attr("hideFocus",false)}function f(){var e=k,i=m;switch(t){case 40:o.scrollByY(n.keyboardSpeed,false);break;case 38:o.scrollByY(-n.keyboardSpeed,false);break;case 34:case 32:o.scrollByY(l*n.scrollPagePercent,false);break;case 33:o.scrollByY(-l*n.scrollPagePercent,false);break;case 39:o.scrollByX(n.keyboardSpeed,false);break;case 37:o.scrollByX(-n.keyboardSpeed,false)}s=e!=k||i!=m;return s}}function yi(){i.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function Ci(){if(location.hash&&location.hash.length>1){var i,t,s=escape(location.hash);try{i=e(s)}catch(n){return}if(i.length&&r.find(s))if(0===c.scrollTop())t=setInterval(function(){if(c.scrollTop()>0){ui(s,true);e(document).scrollTop(c.position().top);clearInterval(t)}},50);else{ui(s,true);e(document).scrollTop(c.position().top)}}}function Ti(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function Bi(){Ti();e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e=this.href.split("#"),i;if(e.length>1){i=e[1];if(i.length>0&&r.find("#"+i).length>0){ui("#"+i,true);return false}}})}function Di(){var e,i,t,s,n,r=false;c.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var a=o.originalEvent.touches[0];e=pi();i=di();t=a.pageX;s=a.pageY;n=false;r=true}).bind("touchmove.jsp",function(a){if(!r)return;var l=a.originalEvent.touches[0],c=k,f=m;o.scrollTo(e+t-l.pageX,i+s-l.pageY);n=n||Math.abs(t-l.pageX)>5||Math.abs(s-l.pageY)>5;return c==k&&f==m}).bind("touchend.jsp",function(e){r=false}).bind("click.jsp-touchclick",function(e){if(n){n=false;return false}})}function Hi(){var e=di(),t=pi();i.removeClass("jspScrollable").unbind(".jsp");i.replaceWith(V.append(r.children()));V.scrollTop(e);V.scrollLeft(t)}e.extend(o,{reinitialise:function(i){i=e.extend({},n,i);O(i)},scrollToElement:function(e,i,t){ui(e,i,t)},scrollTo:function(e,i,t){fi(e,t);ci(i,t)},scrollToX:function(e,i){fi(e,i)},scrollToY:function(e,i){ci(e,i)},scrollToPercentX:function(e,i){fi(e*(f-a),i)},scrollToPercentY:function(e,i){ci(e*(u-l),i)},scrollBy:function(e,i,t){o.scrollByX(e,t);o.scrollByY(i,t)},scrollByX:function(e,i){var t=pi()+Math[e<0?"floor":"ceil"](e),s=t/(f-a);oi(s*w,i)},scrollByY:function(e,i){var t=di()+Math[e<0?"floor":"ceil"](e),s=t/(u-l);si(s*v,i)},positionDragX:function(e,i){oi(e,i)},positionDragY:function(e,i){si(e,i)},animate:function(e,i,t,s){var o={};o[i]=t;e.animate(o,{duration:n.animateDuration,easing:n.animateEase,queue:false,step:s})},getContentPositionX:function(){return pi()},getContentPositionY:function(){return di()},getContentWidth:function(){return f},getContentHeight:function(){return u},getPercentScrolledX:function(){return pi()/(f-a)},getPercentScrolledY:function(){return di()/(u-l)},getIsScrollableH:function(){return j},getIsScrollableV:function(){return h},getContentPane:function(){return r},scrollToBottom:function(e){si(v,e)},hijackInternalLinks:function(){Bi()},destroy:function(){Hi()}});O(s)}i=e.extend({},e.fn.jScrollPane.defaults,i);e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed});return this.each(function(){var t=e(this),n=t.data("jsp");if(n)n.reinitialise(i);else{n=new s(t,i);t.data("jsp",n)}})};e.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:t,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);