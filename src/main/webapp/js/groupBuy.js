!function(e,t,n,s,a){var i={table:".group_buy",input:".group_input",numAttr:"maxnum",buy:".buy_btn,.againbuy_btn",idAttr:"lotoorder",form:"/order/groupBuy_order_participate.html",isAlertPayDialog:false},r=function(n,s){t.dialog?t.dialog(n,s):(e.alert(n),s())},o=function(e,t){var n=[],s,a=encodeURIComponent;for(s in t)n.push(a(s)+"="+a(t[s]));return e+(e.indexOf("?")+1?"&":"?")+n.join("&")},l={ready:function(e){return t(e.table).each(function(){t(this).find(e.input).each(function(){t(this).css("ime-mode","disabled");this.autocomplete="off";this.maxnum=+(t(this).attr(e.numAttr)||"0").replace(/\D/g,"");this.maxnum?l.blur.call(this):t(this).closest("tr").remove()}).end().find(e.buy).each(function(){this.order=t(this).attr(e.idAttr)||"";this.order||t(this).closest("tr").remove()}).end()})},submit:function(e,n){var s=["<form method='post' target='_blank' action='"+e+"'>"],a,i=n||{};for(a in i)s.push("<input type='hidden' name='"+a+"' value='"+i[a]+"'/>");t(s.join("")+"</form>").appendTo(document.body)[0].submit()},focus:function(){if(!/^\d+$/g.test(this.value)){this.value="";this.style.color="#000"}},blur:function(){var e=this.maxnum;if(!/^\d+$/g.test(t.trim(this.value))){this.value=["剩",e>999?"":"余"," ",e+" 份"].join("");this.style.color="#9b9b9b"}},keypress:function(n){var s=this.maxnum,a=t.trim(this.value),i=n.charCode||n.keyCode,r;if(0==i||n.ctrlKey||n.altKey||i<32)return true;r=String.fromCharCode(i);if(46!==i&&(i<=36||i>=41)&&r.search(/\D/)>=0||!a&&"0"==r)return false;var o=this;e.setTimeout(function(){var e=+o.value;if(e>s)o.value=s;else if(0==e)o.value="";else if(/\D/g.test(o.value))o.value=o.value.replace(/\D/g,"")},16)},paste:function(){return false},buyClick:function(i,c){var d=t(this),u=this.order,p=d.closest("tr").find(c.input),m=c.form;if(!u||!p[0])return;if(!/^\d+$/g.test(p[0].value)){r("认购份数格式不正确",function(){p.val("").focus()});i.preventDefault();return}var f={participantBuyPieces:p.val(),lotteryOrderId:u,activityType:37};if(c.isAlertPayDialog)n.loadJS(n.cdnUrl+"/js2/pay/pay.js",function(){return!!n.pay},function(){n.pay.toPay({data:f,orderType:4})});else(e.login===a?s.isLogin(true):e.login)?l.submit(m,f):s.login(o(m,f));i.preventDefault()}};n.groupBuy=function(e,n){var s=n||e,a;if("string"==typeof e)if(!n)s={table:e};else s.table=e;s=t.extend({},i,s);a=l.ready(s).each(function(){t(this).delegate(s.input,"focusin",l.focus).delegate(s.input,"focusout",l.blur).delegate(s.input,"keypress",l.keypress).delegate(s.input,"paste",l.paste).delegate(s.buy,"click",function(e){return l.buyClick.call(this,e,s)})})};n.countDown=function(){var n="d11"===e.gameEn?"11选5":"jxd11"===e.gameEn?"老11选5":"粤11选5",s=t("#kj_ing"),a=t("#kj_list"),i=t("#kj_result"),r,o,l,c;if("undefined"!==typeof e.secondsLeft&&parseInt(e.secondsLeft)>0){lotteryRetime.prototype.setText=function(e,t){e.text.innerHTML="离截止时间还有：<em>"+t[2]+"</em>分<em>"+t[3]+"</em>秒"};t("#group_retime").addClass("end_time endTime_minute").show()}function d(e){var e=e/1e3;var t=Math.floor(e%60);var n=Math.floor(e/60%60);var s=Math.floor(e/3600%24);var a=Math.floor(e/86400);a=a<10?"0"+a:a;s=s<10?"0"+s:s;t=t<10?"0"+t:t;n=n<10?"0"+n:n;return{d:a,h:s,m:n,s:t}}function u(n){var s="http://caipiao.163.com/order/preBet_periodAndAwardTime.html?gameEn="+e.gameEn;t.getJSON(s,{stamp:(new Date).getTime()},function(e){n&&n(e)});e.clearTimeout(r);r=e.setTimeout(function(){u(m)},3e4)}function p(e){i.show();s.hide();m(e)}function m(t){var r,u;r=+t.previousPeriod.slice(-6);u=a.find("tr:first td:eq(0)").text();u=+jQuery.trim(u);if(t.previousPeriod.indexOf(i.find("em:eq(0)").html())<0){e.clearInterval(o);if(r>u)a.prepend("<tr><td>&nbsp;"+t.previousPeriod.slice(-6)+'</td><td><em class="c_939393">等待开奖中</em></td><td>--</td><td>--</td></tr>').find("tr:last").remove();if(t.awardSecondsLeft>0){awardTime=t.awardSecondsLeft;function p(){if(awardTime<0){function r(){i.html("&nbsp;"+n+'&nbsp;第&nbsp;<em class="c_ba2636">'+t.previousPeriod+'</em>&nbsp;期&nbsp;开奖<br><span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span><br>正在获取开奖号码...'+(anTime>=0?anTime:"0")).show();s.hide();a.find("tr:first em").addClass("c_ba2636").removeClass("c_939393").html("开奖中...");if(anTime<0){e.clearInterval(c);f()}else{anTime-=1;c=e.setTimeout(r,1e3)}}e.clearInterval(l);e.clearInterval(c);anTime=40;r()}else{var o=d(awardTime);i.hide();s.html(n+'&nbsp;第&nbsp;<em class="c_ba2636">'+t.previousPeriod+'</em>&nbsp;期&nbsp;等待开奖中<p class="countdown"><i></i>'+o.m+":"+o.s+"</p>").show();awardTime-=1e3;l=e.setTimeout(p,1e3)}}e.clearInterval(l);p()}else{e.clearInterval(l);e.clearInterval(c);s.hide();i.html("&nbsp;"+n+'&nbsp;第&nbsp;<em class="c_ba2636">'+t.previousPeriod+'</em>&nbsp;期&nbsp;开奖<br><span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span><br>正在获取开奖号码...').show();f()}}else{i.show();s.hide()}}function f(){var r=function(e){var t=Number(e);if(t)return t.toString();else return e};function l(){var s="/order/preBet_resentAwardNum.html?gameEn="+e.gameEn;t.getJSON(s,{stamp:(new Date).getTime()},function(s){if(s&&s.latestPeriods&&s.latestPeriods.length){var c=s.latestPeriods[0].period;t("table.index_table").show();if(c===i.find("em:eq(0)").html()){a.html("");t.each(s.latestPeriods,function(e,s){var o=this,l=o.number,c=l.split(" "),d=0,u=0,p=0,m=0,f=o.period;for(var b=0,h=c.length;b<h;b++){c[b]>5?d+=1:u+=1;c[b]%2==0?m+=1:p+=1}a.append(t("<tr></tr>").html(["<td>&nbsp;",f.slice(-6),'</td><td><em class="c_ba2636">',l,"</em></td><td>",d+":"+u,"</td><td>",p+":"+m,"</td>"].join("")));if(0==e)i.html(" "+n+'  第 <em class="c_ba2636">'+f+'</em> 期 开奖<br><span class="iconBred">'+c[0]+'</span>&nbsp;<span class="iconBred">'+c[1]+'</span>&nbsp;<span class="iconBred">'+c[2]+'</span>&nbsp;<span class="iconBred">'+c[3]+'</span>&nbsp;<span class="iconBred">'+c[4]+"</span><br>今天已售&nbsp;"+r(f.slice(-2))+"&nbsp;期，还剩&nbsp;"+r(78-f.slice(-2))+"&nbsp;期")});e.clearInterval(o)}else{e.clearInterval(o);o=e.setTimeout(function(){l()},2e3)}}else{e.clearInterval(o);o=e.setTimeout(function(){l()},2e3)}})}i.show();s.hide();e.clearInterval(o);l()}u(p)};if(/^(d11|gdd11|jxd11)$/.test(e.gameEn))n.countDown()}(window,jQuery,Core,easyNav);