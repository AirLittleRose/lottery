$.fn.flash=function(e,t,n){if($.isFunction(e)){n=e;e=0}if($.isFunction(t)){n=t;t=0}var i=2*(e||3),f=0,s=this.is(":visible"),r=this.flashTimer,a=this;r&&window.clearInterval(r);r=window.setInterval(function(){a.css("visibility",f%2?"visible":"hidden");f++;if(f>=i){window.clearInterval(r);a.flashTimer=0;$.isFunction(n)&&n.call(a)}},t||200);this.flashTimer=r;return this};!function(e,t,n,i,f){t.extend(e,{config:{detailBoundUrl:"/hit/bonusCalc.html#from=bet"},getTotalNum:function(e,t,i,f){var s=0,r=0,a,o,l,c,h=[],u,p={d:{},t:{}},g={d:[],t:[]};for(c=0;c<f.length;c++){p["d"][f[c]]=[];p["t"][f[c]]=[]}if(e.length){for(o in t){if("length"==o)continue;a=0;for(l in t[o]["sp"]){if(t[o].isDan)p.d[l].push(t[o]["sp"][l].length);else p.t[l].push(t[o]["sp"][l].length);a+=t[o]["sp"][l].length}g[t[o].isDan?"d":"t"].push(a)}for(c=0;c<e.length;c++){u=i[e[c]];if(u)h=h.concat(u)}r=n.c2(g.t,g.d,h);if(f.length>1){for(o in p.t)if(p.t[o].length>0)s+=n.c2(p.t[o],p.d[o],h)}else s=r}return[r,s]},getMaxMethod:function(e){var t={},n,i,f=0;for(n in e)for(i in e[n]["sp"])if(!t[i])t[i]=true;if(t["bqc"]||t["bf"])f=4;else if(t["zjq"])f=6;else if(t["spf"]||t["rfspf"])f=8;if(e.length<f)f=e.length;return f},getMinMethod:function(t,n,i){var f,s,r,a,o;t=t||e.config.playType;n=n||e.betPool.cache.selectGameInfo;i=i||e.betArea.cache.gameInfo;if("2x1"==t||"mix"==t)return 2;if("dg"==t||"dgfix"==t||"spfdgp"==t||"bf"==t||"mixall4dg"==t)return 1;f=e.config.isSupportDg;if("mixall"==t||"spf"==t)if(f){if(!n.length)return 1;a={spf:0,rfspf:4,bf:1,zjq:2,bqc:3};for(s in n)if("length"!=s){r=i[s].isDg;if(!r||!r.length)return 2;for(o in n[s].sp)if(!r[a[o]]||"1"!=r[a[o]])return 2}return 1}else return 2;if("zjq"==t||"bqc"==t)if(f){if(!n.length)return 1;for(s in n)if("length"!=s)if("1"!=i[s].isDg)return 2;return 1}else return 2},dan:function(e,t){var e=this.betPool,t=this.betMethod,n=t.cache.selectMethod,i=t.cache.currentMethod,f=t.config.methodType,s,r=e.get(),a={},o={},l,c,h=0;if("m_1"==t.cache.currentType){for(var u in r){if("length"==u)continue;if(r[u].isDan){h+=1;a[u]=false}else a[u]=true}for(var p=0;p<n.length;p++){s=f[n[p]];s=s[0];if(!l||l>s)l=s}for(var p=0;p<i.length;p++){s=f[i[p]];s=s[0];if(!c||c<s)c=s}if(l)if(l==r.length)e.setDisableDan(true);else if(l-1==h)e.setDisableDan(a);else e.setDisableDan(false);else if(h===c-1)e.setDisableDan(a);else if(h>=c)e.setDan(false);else e.setDisableDan(false);h=0;for(var u in r){if("length"==u)continue;if(r[u].isDan)h+=1}if(0==h)t.setDisabledMethod(false);else{for(var p=0;p<i.length;p++){s=f[i[p]];if(h<s)o[i[p]]=false;else o[i[p]]=true}t.setDisabledMethod(o)}}else if("m_n"==t.cache.currentType)e.setDisableDan(true)},formatGameInfo:function(e,t){var n=[],i,f,s,r,a,o,l,c,h={spf:-1,rfspf:-1,bqc:-2,zjq:-1,bf:-2};for(f in e){if("length"==f)continue;a={};for(o in e[f].sp){l=e[f].sp[o];c={};if(l){for(var r in l)if("length"!=r){i=t[o][r];c[String(i[2]).slice(h[o])]=l[r]}a[o]=c}}n.push({matchCode:f,matchnumcn:e[f].matchnumcn,score:e[f].score,isDan:e[f].isDan,sp:a})}return n},formatGameInfo4Detail:function(e,t){var n=[],i,f,s,r,a,o,l;o=this.betArea;for(var c in e){if("length"==c)continue;a=o.cache.gameInfo[c];r=[];for(f in e[c].sp){s=e[c].sp[f];if(s)for(var h in s)if("length"!=h){l=t[f][h];r.push([l[2],s[h]])}}n.push({matchCode:c,startTime:a.startTime,hostName:e[c].hostName,guestName:e[c].guestName,rq:e[c].score,isDan:e[c].isDan,sp:r})}return n},defaultGame:function(n,i,f,s,r,a){var o={},l,c,h,u,p,g,d,m,b,v,D,M,j,y,I,T,q={},w=0,x=0,C={1:"spf",2:"bf",3:"zjq",4:"bqc",5:"rfspf"};if(!n)return o;try{s=s||e.betArea;r=r||e.betPool;a=a||e.betMethod;e.selectAnimation=false;i=i||"";i=i.split(",");j=r.config.teamData;y={};s.clear();for(u in j){v=j[u];y[u]=y[u]||{};for(c=0;c<v.length;c++)y[u][v[c][2]]=c}n=t.trim(n).split(" ");M=s.get().gameInfo;for(c=0;c<n.length;c++){l=n[c].split(":");if(l.length>1&&l.length<=3){p=l[0];d=l[1];g="1"==l[2];g&&++w;q[p]=g;d=d.split(".");++x;if(d&&d.length&&p&&M[p])for(h=0;h<d.length;h++){m=f||C[String(d[h]).length];if(m){I=y[m][d[h]];I=+I;if(I>=0)s.selectOption(p,m,I)}}}}if(w<x&&w>0)r.setDan(q);a.setMethod&&a.setMethod(i)}catch(F){}finally{delete e.selectAnimation}},createForm:function(e,n,i,f){var s=["<form method='",i||"post","' action='",e,"' target='",f||"_blank","'>"],r,a;if(n)for(r in n)s.push("<input type='hidden' name='"+r+"' value='"+n[r]+"'/>");a=t(s.join("")+"</form>").appendTo(document.body);a.submit();a.remove()},Tools:{moveEle:function(e,n,f,s,r){if(e&&n&&f){r=r||t.noop;e=t(e);n=t(n);f=t(f);var a=n.offset(),o=this,l=f.offset(),c=Math.abs(a.left-l.left),h=Math.abs(a.top-l.top),u=a.left,p=a.top,g=l.left,d=l.top,m,b=6,v=c*b/s||10,D=h*v/c;e.css({left:u,top:p,position:"absolute"});m=i.setInterval(function(){if(Math.abs(u-g)<=v){i.clearInterval(m);r()}else{u>g?u-=v:u+=v;p>d?p-=D:p+=D}e.css({left:u,top:p,position:"absolute"})},b)}},preload:function(e,t){var n=new Image;n.onload=function(){t(n.width,n.height);n.onload=null};n.src=e},initScrollBar:function(e){e.jScrollPane().data("jsp");var n={addHoverFunc:function(){this.getContentPane().bind("mouseenter mouseleave",function(e){var n=t(this).siblings(".jspVerticalBar").find(".jspDrag");if("mouseenter"==e.type)n.addClass("jspHover");else n.removeClass("jspHover")})}},i=e.data("jsp");t.extend(i,n);i.addHoverFunc();return i}}})}(Core,jQuery,Game,window);