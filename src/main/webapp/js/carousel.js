!function(t,e){"use strict";var i=function(){var t="animation",i=document.createElement("div").style,s=["Webkit","Moz","O","ms"],n=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+s.join(n+" ")+n).split(" "),a={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var o in r)if(i[r[o]]!==e)return a[r[o]];return""}(),s=""!==i,n=["show","fade","slide"],r=["fxFade","fxCorner","fxVScale","fxFall","fxFPulse","fxRPulse","fxHearbeat","fxRotateSoftly","fxDeal","fxFerris","fxShinkansen","fxSnake","fxShuffle","fxPhotoBrowse","fxCoverflow","fxSlideBehind","fxVacuum","fxHurl"],a={debug:false,animate:"slide",list:"ul",vertical:false,step:1,visible:1,clone:true,prevBtn:"",nextBtn:"",goBtnsWrap:"",prevTriggerEvt:"click",nextTriggerEvt:"click",goBtnTriggerEvt:"mouseenter",goBtnActiveClass:"active",speed:1e3,auto:true,autoInterval:3e3,start:0,cssPath:"http://pimg1.126.net/caipiao/css2/carousel.css",complete:function(t){},before:function(t,e,i,s){},after:function(t,e,i,s){}};function o(e){var i=this.cache=t.extend({},a,e);if(this._check())this._prepareData(e.visible)._backupStyle()._prepareSlide()._loadCss()._bindEvent().resize().go(i.start,true);i.complete(this)}o.prototype={constructor:o,carousel:"1.0.2",_check:function(){var e=this.cache,i=e.animate,a=t(e.wrap),o=e.list.jquery?e.list:a.find(e.list),l="slide"===i,c=l?o.children().filter(":not(.clone)"):a.children().filter(":not(.clone)"),u=c.length,h=e.debug?window.console&&window.console.log?window.console.log:window.alert:t.noop;if(!a.length){h("轮播容器不存在");return false}else if(l&&!o.length){h("slide模式下list不存在");return false}else if(u<2){h("轮播元素数量小于2");return false}else if(s&&t.inArray(i,n.concat(r))===-1||!s&&t.inArray(i,n)===-1){h("无效的动画模式");return false}t.extend(e,{isSlide:l,wrap:a,list:l?o:null,items:c,itemCnt:u});return true},_prepareData:function(e){var i=this.cache,s=i.itemCnt;i.step=i.isSlide&&+i.step>1?+i.step>s-1?s-1:Math.floor(+i.step):1;i.visible=+e?+e<1?1:+e>s-1?s-1:Math.floor(e):i.step;i.speed=+i.speed>=100?+i.speed:1e3;i.start=+i.start>=0&&+i.start<s?Math.floor(i.start):0;i.autoInterval=+i.autoInterval>100?+i.autoInterval:3e3;i.cssPath=i.cssPath||"http://pimg1.126.net/caipiao/css2/carousel.css";i.itemIdx=i.start;i.running=false;i.animFn=t.inArray(i.animate,n)>-1?"_"+i.animate+"To":"_animateTo";i.prevBtn=t(i.prevBtn).length&&t(i.prevBtn).selector?t(i.prevBtn):null;i.nextBtn=t(i.nextBtn).length&&t(i.nextBtn).selector?t(i.nextBtn):null;i.goBtnsWrap=t(i.goBtnsWrap).length&&t(i.goBtnsWrap).selector?t(i.goBtnsWrap):null;i.goBtns=i.isSlide&&+i.step>1?null:i.goBtnsWrap&&i.goBtnsWrap.children().length?t(i.goBtnsWrap).children():null;i.goBtnTriggerEvt="click"===i.goBtnTriggerEvt?"click":"mouseenter";i.before=t.isFunction(i.before)?i.before:t.noop;i.after=t.isFunction(i.after)?i.after:t.noop;i.complete=t.isFunction(i.complete)?i.complete:t.noop;return this},_backupStyle:function(){var e=this.cache,i,s,n;e.backup={};i=e.backup.itemsStyle=[];s=e.backup.itemsClass=[];e.backup.wrapStyle=e.wrap[0].style.cssText;e.backup.wrapClass=e.wrap.attr("class");if(e.isSlide){e.backup.listStyle=e.wrap[0].style.cssText;e.backup.listClass=e.list.attr("class")}e.items.each(function(e,n){i.push(n.style.cssText);s.push(t(n).attr("class"))});if(e.goBtns){n=e.backup.goBtnsClass=[];e.goBtns.each(function(e,i){n.push(t(i).attr("class"))})}return this},_prepareSlide:function(){var e=this.cache,i=e.items;if(e.isSlide){if(e.clone){e.list.empty();i.each(function(e,i){t(i).data("origin-idx",e)});e.list.append(i.clone(true).addClass("clone")).append(i).append(i.clone(true).addClass("clone"));i=e.list.children();e.items=i;e.itemCnt=i.length}if(e.vertical){e.animProp="margin-top";i.css({"float":"none"})}else{e.animProp="margin-left";i.css({"float":"left"})}e.wrap.css("overflow","hidden")}return this},_loadCss:function(){var e=this.cache,i=e.animate;if(!/slide|show/.test(i)){!t("#carouselStyle").length&&t("<link>").attr({id:"carouselStyle",type:"text/css",rel:"stylesheet",href:e.cssPath}).appendTo(t("head")[0]);setTimeout(function(){if(t("#carouselStyle").length){e.wrap.addClass(/^fx/.test(i)?"carouselWrap-css3 "+i:"carouselStage-jsFade");e.items.addClass("carouselItem")}},1500)}return this},_bindEvent:function(){var e=this,i=this.cache,s=i.goBtns,n=0,r=-1,a,o,l,c;i.prevBtn&&i.prevBtn.unbind(i.prevTriggerEvt).bind(i.prevTriggerEvt,t.proxy(this.prev,this));i.nextBtn&&i.nextBtn.unbind(i.nextTriggerEvt).bind(i.nextTriggerEvt,t.proxy(this.next,this));if(s){a=function(){var s=t(this).index();if(i.isSlide&&i.clone){var n=i.itemIdx,r=+i.items.eq(n).data("origin-idx");s+=n-r}e.go(s*i.step)};if("click"===i.goBtnTriggerEvt)s.unbind("click",a).click(a);else s.unbind("mouseenter mouseleave").mouseenter(function(){n=+new Date;r=window.setTimeout(t.proxy(a,this),200)}).mouseleave(function(){+new Date-n<200&&window.clearTimeout(r)})}i.items.unbind("mouseenter mouseleave").add(i.goBtns).mouseenter(function(){i.isHovering=true;i.auto&&e.stopAuto()}).mouseleave(function(){i.isHovering=false;i.auto&&e.startAuto()});return this},_fixIdx:function(e){var i=this.cache,s=i.itemCnt,n=i.itemIdx,r=i.items,a,o,l,c;if(i.isSlide&&i.clone){a=+r.eq(n).data("origin-idx")||0;o=s-i.visible;if(e>o){l=r.filter(function(){return t(this).data("origin-idx")===a}).first();c=l.length?l.index():0;e=c+i.step;this._slideTo(c,true)}else if(e<0){l=r.filter(function(e){return t(this).data("origin-idx")===a&&e<=o&&e>=i.step}).last();c=l.length?l.index():o;e=c-i.step;this._slideTo(c,true)}return e}else return e>s-1?e%s:e<0?e%s==0?0:e%s+s:e},_showTo:function(t,e){t=this._fixIdx(t);this.cache.items.hide().eq(t).show();e(t);return this},_fadeTo:function(t,e,i){t=this._fixIdx(t);var s=this.cache,n=s.items,r=n.eq(s.itemIdx),a=n.eq(t).addClass("switching");if(i){e(t);return this}r.fadeOut(s.speed,function(){r.show();a.removeClass("switching");e(t)});return this},_slideTo:function(e,i,s){var n=this.cache,r={};e=this._fixIdx(e);r[n.animProp]=-n.animSize*e+"px";if(!t.isFunction(i)){s=i;i=t.noop}if(s){n.list.css(r);i(e);return this}n.list.animate(r,n.speed,function(){i(e)});return this},_animateTo:function(t,e,s){var n=this.cache,r=n.itemIdx,a=t>r?"navInNext":"navInPrev",o=t>r?"navOutNext":"navOutPrev",l=n.items.eq(r),c=this._fixIdx(t),u=n.items.eq(c),h=0,d=function(){h++;if(2===h){l.removeClass(o);u.removeClass(a);e(c)}};if(s){e(c);return this}l.one(i,d).addClass(o);u.one(i,d).addClass(a);return this},resize:function(){var t=this.cache,e=t.wrap,i=t.list,s=t.items,n=s.outerWidth(true),r=s.outerHeight(true),a=t.visible,o=t.itemCnt,l,c,u,h,d;if(t.isSlide){if(t.vertical){l=parseInt(s.css("margin-bottom"));c=r-l;s.css({"margin-top":l+"px"}).last().css("margin-bottom",l+"px");e.height(c*a);i.height(c*o)}else{c=n;e.width(c*a);i.width(c*o)}t.animSize=c}else t.wrap.height(r).width(n);return this},prev:function(){return this.go(this.cache.itemIdx-this.cache.step)},next:function(){return this.go(this.cache.itemIdx+this.cache.step)},go:function(t,e){var i=this,s=this.cache,n=s.goBtnActiveClass,r=s.itemIdx,a=s.items.eq(r);if(s.running||t===(s.isSlide&&s.clone?+a.data("origin-idx"):r)&&!e||false===this.cache.before(a,s.goBtns?s.goBtns.filter(n):null,s.prevBtn,s.nextBtn))return;s.running=true;s.auto&&this.stopAuto();s.goBtns&&s.goBtns.removeClass(n);return this[s.animFn](t,function(t){var e=s.isSlide&&s.clone?+s.items.eq(t).data("origin-idx")/s.step:t,r=s.goBtns?s.goBtns.eq(e).addClass(n):null,a=s.items.removeClass("active").eq(t).addClass("active");s.itemIdx=t;s.auto&&!s.isHovering&&!s.isTouching&&i.startAuto();s.after(a,r,s.prevBtn,s.nextBtn);s.running=false},e)},startAuto:function(){this.stopAuto();this.cache.autoTimer=window.setInterval(t.proxy(this.next,this),this.cache.autoInterval);this.cache.auto=true;return this},stopAuto:function(){this.cache.autoTimer&&window.clearInterval(this.cache.autoTimer);return this},destroy:function(){var e=this.cache,i=e.backup,s=i.itemsStyle,n=i.itemsClass,r=i.goBtnsClass,a=e.wrap,o=e.list,l=e.items,c=e.goBtns;e.autoTimer&&window.clearInterval(e.autoTimer);e.prevBtn&&e.prevBtn.unbind(e.prevTriggerEvt);e.nextBtn&&e.nextBtn.unbind(e.nextTriggerEvt);l.unbind("mouseenter mouseleave touchstart touchend");c&&c.unbind(e.goBtnTriggerEvt+e.auto?" mouseenter mouseleave":"");c&&c.each(function(e,i){r[e]?t(i).attr("class",r[e]):t(i).removeAttr("class")});i.wrapClass?a.attr("class",i.wrapClass):a.removeAttr("class");i.wrapStyle?a[0].style.cssText=i.wrapStyle:a.removeAttr("style");if(e.isSlide){i.listClass?o.attr("class",i.listClass):o.removeAttr("class");i.listStyle?o[0].style.cssText=i.listStyle:o.removeAttr("style")}e.items.filter(".clone").remove();a.children().each(function(e,i){var r=t(i);s[e]?i.style.cssText=s[e]:r.removeAttr("style");r.removeData("origin-idx").attr("class",n[e])});e=this.cache=null;this._check=this._bindEvent=this._prepareData=this._loadCss=this._showTo=this._fadeTo=this._slideTo=this._animateTo=this.next=this.prev=this.go=this.stopAuto=this.startAuto=this.destroy=t.noop;return this}};t.fn.carousel=function(e){return new o(t.extend(e,{wrap:this[0]}))}}(window.jQuery);